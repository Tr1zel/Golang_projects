{{ define "home" }}
{{ template "header" }}

<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar with notes list -->
            <div class="col-md-4 col-lg-3 sidebar p-0">
                <div class="d-flex flex-column h-100">
                    <div class="p-3 border-bottom">
                        <h4 class="mb-0">Мои заметки</h4>
                    </div>
                    
                    <div class="flex-grow-1 overflow-auto" id="notesList">
                        {{ range . }}
                        <div class="note-item p-3" onclick="selectNote('{{ .Name }}', '{{ .Desсription }}', '{{ .TimeCreate.Format "02.01.2006 15:04" }}')">
                            <h6 class="mb-1">{{ .Name }}</h6>
                            <p class="mb-1 text-muted small">{{ .Desсription }}</p>
                            <small class="text-muted">{{ .TimeCreate.Format "02.01.2006 15:04" }}</small>
                        </div>
                        {{ else }}
                        <div class="text-center p-4 text-muted">
                            Заметок пока нет
                        </div>
                        {{ end }}
                    </div>
                    
                    <div class="add-btn">
                        <a href="/create" class="btn btn-primary w-100">
                            Создать заметку
                        </a>
                    </div>
                </div>
            </div>

            <!-- Note content area -->
            <div class="col-md-8 col-lg-9 note-content p-4">
                <div id="emptyState">
                    <div class="text-center text-muted">
                        <h3>Выберите заметку для просмотра</h3>
                        <p>или создайте новую</p>
                    </div>
                </div>
                
                <div id="noteDetail" style="display: none;">
                    <div class="mb-4">
                        <h2 id="noteTitle"></h2>
                        <small class="text-muted" id="noteDate"></small>
                    </div>
                    <div id="noteBody" class="mb-4"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function selectNote(title, description, date) {
            // Скрываем пустое состояние
            document.getElementById('emptyState').style.display = 'none';
            
            // Показываем детали заметки
            document.getElementById('noteDetail').style.display = 'block';
            
            // Заполняем данные
            document.getElementById('noteTitle').textContent = title;
            document.getElementById('noteDate').textContent = 'Создано: ' + date;
            document.getElementById('noteBody').textContent = description;
            
            // Убираем активный класс со всех заметок
            document.querySelectorAll('.note-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Добавляем активный класс к выбранной заметке
            event.target.closest('.note-item').classList.add('active');
        }
    </script>
</body>
</html>
{{ end }}